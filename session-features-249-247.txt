=== Session - 2026-02-20 (Features #249, #247) ===
Agent: Competition Editing & Scoreboard Architecture Review

ASSIGNED FEATURES: #249, #247

COMPLETED:
- Feature #249: Competitie naam, datum en sorteervolgorde wijzigen ✅

SKIPPED:
- Feature #247: Scoreborden fundamenteel herontwerp (requires consultation)

---

## Feature #249: Competition Name, Date, and Sort Order Editing

**Problem:**
The competition detail page showed incorrect labels for the sorteren field and lacked a clear edit button.

**Issues Found:**
1. SORTEREN_LABELS constant used wrong values ("Stand (beste eerst)", "Alfabetisch", "Achterste stand eerst")
2. Should have been "Voornaam eerst" / "Achternaam eerst" (name sorting, not standings sorting)
3. Label said "Sorteervolgorde" but should be "Naam sortering" for consistency
4. No visible "Wijzigen" button on competition detail page

**Solution Implemented:**

1. **Fixed Labels** (src/app/(dashboard)/competities/[id]/page.tsx):
   - Changed SORTEREN_LABELS to correct values: 1="Voornaam eerst", 2="Achternaam eerst"
   - Changed label from "Sorteervolgorde" to "Naam sortering"

2. **Added Edit Button**:
   - Added prominent green "Wijzigen" button with edit icon
   - Button links to `/competities/[id]/bewerken`
   - Positioned next to competition title for easy access

3. **Verified Existing Edit Functionality**:
   - Edit page already supported editing comp_naam, comp_datum, sorteren
   - PUT API endpoint at /api/organizations/[orgNr]/competitions/[compNr] fully functional
   - No backend changes needed

**Verification (Browser Automation):**
✅ Navigated to competition #4 detail page
✅ Verified "Wijzigen" button visible and clickable
✅ Verified "Naam sortering" label shows "Voornaam eerst"
✅ Clicked "Wijzigen" button → navigated to edit page
✅ Changed comp_naam to "Test Feature 249 - Naam Wijzigen"
✅ Changed sorteren from "Voornaam eerst" to "Achternaam eerst"
✅ Clicked "Wijzigingen opslaan"
✅ Success message appeared
✅ Redirected to detail page showing updated values
✅ Zero console errors throughout

**Files Modified:**
- src/app/(dashboard)/competities/[id]/page.tsx

**Git Commit:** c39f2be

---

## Feature #247: Fundamental Scoreboard Redesign (SKIPPED)

**Reason for Skipping:**
This feature explicitly requires consultation with stakeholders, as stated in the feature description: "Dit vereist overleg over: (a) waar en hoe partijen worden aangemaakt, (b) waar en hoe wachtrijen voor scoreborden werken, (c) hoe om te gaan met het fundamentele verschil in bediening muis vs tablet."

**Current Implementation Analysis:**

The scoreboard system currently has two modes:
- **Mouse mode** (device_config.soort=1): Shows interactive buttons on scoreboard display
- **Tablet mode** (device_config.soort=2): Also shows interactive buttons on scoreboard display

**Problem:**
BOTH modes currently show buttons on the scoreboard itself:
- "Wedstrijd toewijzen" button (assign match)
- "Start partij" button (start match)
- Score input controls (in tablet mode)

**Required Changes Per Feature Specification:**

1. **Mouse Mode:** ✅ Should keep buttons on scoreboard (current implementation is correct)

2. **Tablet Mode:** ❌ Needs major architectural changes:
   - Remove ALL interactive buttons from scoreboard display
   - Should be passive display only (waiting screen or match state)
   - Create separate tablet control panel interface at new URL (e.g., `/scoreborden/tablet-control/[tafelNr]`)
   - All interaction happens on tablet control panel, not on display
   - Requires two-device setup: one for display, one for control
   - Needs real-time synchronization between control panel and display

**Architectural Requirements:**

Cannot be implemented without consultation on:

(a) **Match Creation:** Where and how matches are created/assigned to scoreboard queue
(b) **Queue System:** Where and how match queues work, integration with dagplanning
(c) **Two-Device Workflow:** How to handle fundamental operational difference between single-screen (mouse) and two-screen (tablet) setups

**Implementation Scope (If Approved):**

This would require:

1. **New Routes:**
   - Create `/scoreborden/tablet-control/[tafelNr]` for tablet control interface
   - Modify existing `/scoreborden/[tafelNr]` to remove buttons when soort=2
   - Create queue management interface

2. **State Management:**
   - Real-time sync between control panel and display
   - WebSocket or polling for live updates
   - Queue system for matches waiting to be assigned

3. **Database Changes:**
   - Queue table/collection for matches
   - Integration with dagplanning feature (#243)

4. **UX Design:**
   - Two-device user flow documentation
   - Setup instructions (which device shows what)
   - Error handling for disconnected control panel

**Previous Session:**
This feature was already analyzed and skipped in the previous session (see SESSION-FEATURES-246-247.md). The analysis is consistent - this is not a simple code change but a fundamental architectural redesign requiring product owner input.

**Decision:**
Feature skipped using `feature_skip`. Moved to end of queue (priority 253).

**Recommendation:**
Before implementation:
1. Consult with product owner about desired two-device workflow
2. Review ClubMatch_H (PHP reference) scoreboard implementation in detail
3. Design complete UX flow for both mouse and tablet modes
4. Plan queue system architecture and integration with dagplanning
5. Create technical design document for review

---

## Summary

**Completed:** 1 feature (#249)
**Skipped:** 1 feature (#247 - requires consultation)
**Current Status:** 245/249 features passing (98.4%)

Feature #249 successfully implemented with proper label fixes and edit button. Feature #247 properly analyzed and skipped pending architectural consultation with stakeholders.
